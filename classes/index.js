const agencies = [
  {
    agencyName: "Best Deal",
    cash: 1245000,
    credit: 200000,
    agencyId: "Plyq5M5AZ",

    cars: [
      {
        brand: "bmw",
        models: [
          {
            name: "3",
            year: 2015,
            price: 137000,
            carNumber: "AZJZ4",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "X6",
            year: 2020,
            price: 966500,
            carNumber: "S6DL1",
            ownerId: "Plyq5M5AZ",
          },
        ],
      },
      {
        brand: "toyota",
        models: [
          {
            name: "Land Cruiser",
            year: 2020,
            price: 336300,
            carNumber: "6rvXw",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Hilux",
            year: 2005,
            price: 35005,
            carNumber: "MWXBG",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Corolla",
            year: 2020,
            price: 111900,
            carNumber: "hCzl-",
            ownerId: "Plyq5M5AZ",
          },
        ],
      },
      {
        brand: "Ford",
        models: [
          {
            name: "Focus",
            year: 2020,
            price: 98200,
            carNumber: "kN3HP",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Focus",
            year: 2005,
            price: 6502,
            carNumber: "LJTCs",
            ownerId: "Plyq5M5AZ",
          },
        ],
      },
      {
        brand: "Alpha romeo",
        models: [
          {
            name: "Romeo Julia",
            year: 2020,
            price: 275406,
            carNumber: "2kjy7",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Romeo Stelvio",
            year: 2019,
            price: 215403,
            carNumber: "7A5b-",
            ownerId: "Plyq5M5AZ",
          },
        ],
      },
      {
        brand: "Chevrolet",
        models: [
          {
            name: "Traverse",
            year: 2020,
            price: 201102,
            carNumber: "QwBOT",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Impala",
            year: 2019,
            price: 165041,
            carNumber: "2v4jt",
            ownerId: "Plyq5M5AZ",
          },
          {
            name: "Malibu",
            year: 2017,
            price: 75405,
            carNumber: "O4_Jv",
            ownerId: "Plyq5M5AZ",
          },
        ],
      },
    ],
  },
  {
    agencyName: "CarMax",
    cash: 968541,
    credit: 500000,
    agencyId: "26_IPfHU1",
    cars: [
      {
        brand: "bmw",
        models: [
          {
            name: "X5",
            year: 2015,
            price: 218000,
            carNumber: "4Ixb0",
            ownerId: "26_IPfHU1",
          },
          {
            name: "X6",
            year: 2014,
            price: 97100,
            carNumber: "kAnv-",
            ownerId: "26_IPfHU1",
          },
          {
            name: "Z4",
            year: 2019,
            price: 296900,
            carNumber: "ISMdU",
            ownerId: "26_IPfHU1",
          },
          {
            name: "3",
            year: 2010,
            price: 75100,
            carNumber: "9DJPw",
            ownerId: "26_IPfHU1",
          },
          // BMW Car Was Transferred Here From First Agency.
        ],
      },
      {
        brand: "toyota",
        models: [
          {
            name: "Land Cruiser",
            year: 2005,
            price: 80540,
            carNumber: "Kt-pW",
            ownerId: "26_IPfHU1",
          },
          {
            name: "Corolla",
            year: 2019,
            price: 109100,
            carNumber: "YiYdI",
            ownerId: "26_IPfHU1",
          },
          {
            name: "Hilux",
            year: 2019,
            price: 204000,
            carNumber: "DRmNw",
            ownerId: "26_IPfHU1",
          },
        ],
      },
      {
        brand: "Ford",
        models: [
          {
            name: "F250",
            year: 2020,
            price: 198500,
            carNumber: "g4Wfp",
            ownerId: "26_IPfHU1",
          },
          {
            name: "Explorer",
            year: 2020,
            price: 265200,
            carNumber: "iNT8Q",
            ownerId: "26_IPfHU1",
          },
        ],
      },
      {
        brand: "Alpha romeo",
        models: [
          {
            name: "Spider",
            year: 2011,
            price: 75405,
            carNumber: "6t7QU",
            ownerId: "26_IPfHU1",
          },
          {
            name: "166",
            year: 2002,
            price: 12400,
            carNumber: "XMqpn",
            ownerId: "26_IPfHU1",
          },
        ],
      },
      {
        brand: "Chevrolet",
        models: [
          {
            name: "Impala",
            year: 2016,
            price: 65042,
            carNumber: "vbeAo",
            ownerId: "26_IPfHU1",
          },
          {
            name: "Savannah",
            year: 2016,
            price: 76505,
            carNumber: "WelWa",
            ownerId: "26_IPfHU1",
          },
        ],
      },
    ],
  },
  {
    agencyName: "The Auto World",
    cash: 687450,
    credit: 200000,
    agencyId: "gNHjNFL12",
    cars: [
      {
        brand: "bmw",
        models: [
          {
            name: "X6",
            year: 2018,
            price: 548100,
            carNumber: "EMW_7",
            ownerId: "gNHjNFL12",
          },
          {
            name: "3",
            year: 2017,
            price: 178000,
            carNumber: "XlnB4",
            ownerId: "gNHjNFL12",
          },
        ],
      },
      {
        brand: "toyota",
        models: [
          {
            name: "Prius",
            year: 2017,
            price: 101542,
            carNumber: "-RQgN",
            ownerId: "gNHjNFL12",
          },
          {
            name: "Highlander",
            year: 2017,
            price: 202540,
            carNumber: "AZJZ4",
            ownerId: "gNHjNFL12",
          },
          {
            name: "Corolla",
            year: 1996,
            price: 5420,
            carNumber: "kHE8f",
            ownerId: "gNHjNFL12",
          },
          {
            name: "Corolla",
            year: 2012,
            price: 40570,
            carNumber: "p2qEi",
            ownerId: "gNHjNFL12",
          },
        ],
      },
      {
        brand: "Ford",
        models: [
          {
            name: "Explorer",
            year: 2014,
            price: 127502,
            carNumber: "Ty1zN",
            ownerId: "gNHjNFL12",
          },
          {
            name: "F350",
            year: 2012,
            price: 54250,
            carNumber: "z03H2",
            ownerId: "gNHjNFL12",
          },
        ],
      },
      {
        brand: "Chevrolet",
        models: [
          {
            name: "Savannah",
            year: 2010,
            price: 36504,
            carNumber: "RXFZe",
            ownerId: "gNHjNFL12",
          },
          {
            name: "Malibu",
            year: 2009,
            price: 19585,
            carNumber: "K5IsM",
            ownerId: "gNHjNFL12",
          },
        ],
      },
    ],
  },
  {
    agencyName: "Car Werks",
    cash: 302502,
    credit: 150000,
    agencyId: "9KeaYbRLP",
    cars: [
      {
        brand: "bmw",
        models: [
          {
            name: "8",
            year: 2020,
            price: 942500,
            carNumber: "4IUMz",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "X6",
            year: 2010,
            price: 129000,
            carNumber: "Vw0fV",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "X3",
            year: 2019,
            price: 358100,
            carNumber: "ufN54",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "3",
            year: 2020,
            price: 389100,
            carNumber: "F127X",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "3",
            year: 2002,
            price: 18400,
            carNumber: "ueZUp",
            ownerId: "9KeaYbRLP",
          },
        ],
      },
      {
        brand: "toyota",
        models: [
          {
            name: "Prius",
            year: 2011,
            price: 38520,
            carNumber: "AZJZ4",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "Land Cruiser",
            year: 2019,
            price: 290040,
            carNumber: "AZJZ4",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "Hilux",
            year: 2020,
            price: 215700,
            carNumber: "xig8N",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "Hilux",
            year: 2015,
            price: 178506,
            carNumber: "ghTiQ",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "Corolla",
            year: 2002,
            price: 8504,
            carNumber: "Mvw8T",
            ownerId: "9KeaYbRLP",
          },
        ],
      },
      {
        brand: "Chevrolet",
        models: [
          {
            name: "Impala",
            year: 2005,
            price: 9320,
            carNumber: "BZpkt",
            ownerId: "9KeaYbRLP",
          },
          {
            name: "Malibu",
            year: 2002,
            price: 4502,
            carNumber: "KqKV_",
            ownerId: "9KeaYbRLP",
          },
        ],
      },
    ],
  },
  {
    agencyName: "Carsova",
    cash: 72450,
    credit: 50000,
    agencyId: "oqQmsZoUo",
    cars: [
      {
        brand: "bmw",
        models: [
          {
            name: "7",
            year: 1999,
            price: 24700,
            carNumber: "sZrjp",
            ownerId: "oqQmsZoUo",
          },
          {
            name: "3",
            year: 2008,
            price: 54000,
            carNumber: "da88K",
            ownerId: "oqQmsZoUo",
          },
        ],
      },
      {
        brand: "toyota",
        models: [
          {
            name: "Prius",
            year: 2019,
            price: 124050,
            carNumber: "ZfbqH",
            ownerId: "oqQmsZoUo",
          },
          {
            name: "Hilux",
            year: 1996,
            price: 11540,
            carNumber: "AZJZ4",
            ownerId: "oqQmsZoUo",
          },
        ],
      },
    ],
  },
];

const customers = [
  {
    name: "Lilah Goulding",
    id: "BGzHhjnE8",
    cars: [
      {
        name: "Corolla",
        year: 2013,
        price: 40570,
        carNumber: "16da1",
        ownerId: "BGzHhjnE8",
      },
    ],
    cash: 35000, // Customers Cash Was Changed In(Change Customer's Cash To 50,000)
  },
  {
    name: "Ravi Murillo",
    id: "2RprZ1dbL",
    cars: [
      {
        name: "M5",
        year: 2019,
        price: 578054,
        carNumber: "WIh0U",
        ownerId: "2RprZ1dbL",
      },
      {
        name: "Spider",
        year: 2012,
        price: 81520,
        carNumber: "RLS4q",
        ownerId: "2RprZ1dbL",
      },
    ],
    cash: 278542,
  },
  {
    name: "Aleksander Carr",
    id: "pAuFtn_WA",
    cars: [
      {
        name: "Highlander",
        year: 2018,
        price: 214503,
        carNumber: "2WU_y",
        ownerId: "pAuFtn_WA",
      },
    ],
    cash: 125402,
  },
  {
    name: "Lana Edge",
    id: "cnTobUDy6",
    cars: [
      {
        name: "F250",
        year: 2020,
        price: 198500,
        carNumber: "Xxcy_",
        ownerId: "cnTobUDy6",
      },
      {
        name: "Hilux",
        year: 2005,
        price: 35005,
        carNumber: "VSCUj",
        ownerId: "cnTobUDy6",
      },
    ],
    cash: 7000,
  },
  {
    name: "Nikita Philip",
    id: "5x2tMcX4R",
    cars: [
      {
        name: "Impala",
        year: 2016,
        price: 65042,
        carNumber: "LKInp",
        ownerId: "5x2tMcX4R",
      },
    ],
    cash: 40541,
  },
  {
    name: "Bob Steel",
    id: "Wm6BkA1F0",
    cars: [],
    cash: 15732,
  },
  {
    name: "Will Reyes",
    id: "FQvNsEwLZ",
    cars: [
      { name: "X6", year: 2020, price: 966500, ownerId: "FQvNsEwLZ" },
      {
        name: "Land Cruiser",
        year: 2020,
        price: 336300,
        carNumber: "vaJvd",
        ownerId: "FQvNsEwLZ",
      },
      {
        name: "Romeo Julia",
        year: 2020,
        price: 275406,
        carNumber: "qLoYR",
        ownerId: "FQvNsEwLZ",
      },
      {
        name: "Explorer",
        year: 2020,
        price: 265200,
        carNumber: "tlGRq",
        ownerId: "FQvNsEwLZ",
      },
      // Car Transferred Here In Last Exercise
    ],
    cash: 1547242,
  },
];

class CarAgencyManager {
  constructor(agencies) {
    this.agencies = agencies;
  }

  //Search Car And Give The Brand And Index
  searchCarIndex(id, agency) {
    let theCar = [];
    for (const carBrand of agency.cars) {
      carBrand.models.find((car, index) => {
        if (car.carNumber === id) {
          return theCar = [carBrand.brand, index];
        }
      });
    }
    return theCar.length !== 0 ? theCar : false;
  }

  //Total Funds In An Agency
  checkTotalAgencyFunds(agency) {
    return agency.cash + agency.credit;
  }

  //Search Agency
  searchAgency(idOrName) {
    return (
      this.agencies.find(
        (agency) =>
          agency.agencyName === idOrName || agency.agencyId === idOrName
      ) || null
    );
  }

  //Get All Agencies
  getAllAgencies() {
    return this.agencies.map(agency => agency.agencyName);
  }

  //Add A Car To An Agency
  addCarToAgency(id, newCar) {
    const agency = this.searchAgency(id);
    if (!agency) return false;

    const brand = agency.cars.find((car) => car.brand === newCar.brand);

    if (brand) {
      brand.models.push(...newCar.models);
      return true;
    } else {
      agency.cars.push(newCar);
      return true;
    }
  }

  // Remove A Car From An Agency
  removeCarFromAgency(id, carId) {
    let carRemoved = false;

    const agency = this.searchAgency(id);
    if (!agency) return false;

    const theCar = this.searchCarIndex(carId, agency);
    if (!theCar) return false;

    const [carBrand, index] = theCar;

    agency.cars.forEach((brands) => {
      if (brands.brand === carBrand) {
        brands.models.splice(index, 1);
        carRemoved = true;
      }
    });
    return carRemoved;
  }

  //Change The Amount Of Cash And Credit In An Agency
  changeAgencyCashOrCredit(agencyId, cashOrCredit) {
    const agency = this.searchAgency(agencyId);
    if (typeof cashOrCredit !== `number` || !agency) {
      return false;
    }

    if (cashOrCredit < 0) {
      if (Math.abs(cashOrCredit) > agency.cash) {
        agency.credit = this.checkTotalAgencyFunds(agency) + cashOrCredit;
        agency.cash = 0;
      } else {
        agency.cash = agency.cash + cashOrCredit;
      }
      return true;
    } else {
      agency.cash += cashOrCredit;
      return true;
    }
  }

  //Update The Car Price
  updateCarPrice(agencyId, carId, newPrice) {
    const agency = this.searchAgency(agencyId);
    if (!agency) return false;

    const theCar = this.searchCarIndex(carId, agency);
    if (!theCar) return false;

    const [carBrand, carIndex] = theCar;

    agency.cars.forEach((brands) => {
      if (brands.brand === carBrand) {
        brands.models[carIndex].price = newPrice;
      }
    });
    return true;
  }

  // Get The Total Funds In an Agency Using ID
  getTotalAgencyRevenue(agencyId) {
    const agency = this.searchAgency(agencyId);
    if (!agency) return false;

    return this.checkTotalAgencyFunds(agency);
  }

  //Transfer A Car - Copy Car/Delete Car/Paste Car
  transferCarBetweenAgencies(fromAgencyId, toAgencyId, carId) {
    this.searchAgency(fromAgencyId);
    this.searchAgency(toAgencyId);
    if (!fromAgencyId || !toAgencyId) return false;

    const carCopy = this.copyCarObject(fromAgencyId, carId);
    if (!carCopy) return false;

    const removeCar = this.removeCarFromAgency(fromAgencyId, carId);
    if (!removeCar) return false;

    const addCar = this.addCarToAgency(toAgencyId, carCopy);
    if (!addCar) return false;

    return true;
  }

  //Copy A Car
  copyCarObject(id, carId) {
    const agency = this.searchAgency(id);
    if (!agency) return false;

    let carCopy = { brand: null, models: [] };

    agency.cars.forEach((brands) => {
      brands.models.find((car) => {
        if (car.carNumber === carId) {
          carCopy.brand = brands.brand;
          carCopy.models.push({ ...car });
        }
      });
    });
    return carCopy;
  }
}

class CustomerManager {
  constructor(customers) {
    this.customers = customers;
  }

  //Search For A Customer By ID or Name
  searchCustomer(idOrName) {
    return (
      this.customers.find(
        (customer) => customer.name === idOrName || customer.id === idOrName
      ) || null
    );
  }

  //Get A String Of All Customer Names
  getAllCustomers() {
    return this.customers.map((customer) => customer.name);
  }

  //Change The Cash A Customer Has
  changeCustomerCash(customerId, cash) {
    const customer = this.searchCustomer(customerId);
    if (!customer || typeof cash !== "number") return false;

    customer.cash = cash;
    return true;
  }

  // Count The Total Car Value Of a Particular Customer
  getCustomerTotalCarValue(customerId) {
    const customer = this.searchCustomer(customerId);
    if (!customer) return false;

    return customer.cars.reduce((acc, car) => acc + car.price, 0);
  }
}

class CarManager {
  constructor(agencies) {
    this.agencies = agencies;
  }

  // Return An Array Of All Cars
  getAllCars() {
    let cars = [];

    this.agencies.forEach((agency) => {
      agency.cars.forEach((car) => {
        cars.push(...car.models);
      });
    });
    return cars;
  }


  // Search A Car By Brand / Price / Year range
  searchCars(carYear, carPrice, carBrand) {
    const carArray = [];
  
    this.agencies.forEach(agency => {
      agency.cars.forEach(brands => {
        if (brands.brand === carBrand){
          brands.models.forEach(car => {
            if (car.year === carYear && car.price === carPrice) {
              carArray.push(car);
            }
          });
        }
      });
    });

    return carArray.length !== 0 ? carArray : null;
  }
  
  // Returns The Most Expensive Car
  getMostExpensiveCar() {
    const allCars = this.getAllCars();
    
    const mostExpensiveCar = allCars.reduce((mostExpensive, car) =>{
   return  mostExpensive.price < car.price ? car : mostExpensive;
    }, allCars[0])
    
    return mostExpensiveCar;
  }


   // Returns The cheapest Car
  getCheapestCar() {
    const allCars = this.getAllCars();
    
    const cheapestCar = allCars.reduce((cheapest,car) => {
      return cheapest.price > car.price ? car : cheapest;
    }, allCars[0]);

    return cheapestCar;
  }
}

class CarPurchaseManager {
  constructor(agencies, customers) {
    this.agencies = agencies;
    this.customers = customers;
    this.taxesAuthority = {
      totalTaxesPaid: 0,
      sumOfAllTransactions: 0,
      numberOfTransactions: 0,
    };
  }

  // Find The Customer
  searchCustomer(idOrName) {
    return (
      this.customers.find(
        (customer) => customer.name === idOrName || customer.id === idOrName
      ) || null
    );
  }

  // Find The Car's Agency (First Instance Of The Car ID)
  searchAgencyWIthCarID(theCarId){
    let theAgency = null;
     this.agencies.find( agency =>{
      return agency.cars.find(brands => {
        return brands.models.find( car => {
           if(car.carNumber === theCarId){
            return theAgency = {...agency};
          }
        })
      })
    })
    return theAgency !== null ? theAgency : false;
  }

  // Function From First Exercise To Get Car Index And Availability (Added Price)
  searchCarIndex(id, agency) {
    let theCar = [];
    
    agency.cars.forEach(brand => {
      brand.models.find((car, index) => {
        if (car.carNumber === id) {
          return theCar = [brand.brand,index ,car.price];
        }
      });
    })
    return theCar.length !== 0 ? theCar : false;
  }

  //Verify Customer Has enough Cash
  verifyCustomerCash(customer, rate){
    return customer.cash >= rate ? true : false;  
  }

  // Update Cash Transfer And Get Tax
  updateCashTransfer(customer, agency, rate){
    const tax17 = Math.round(rate * 0.17);
    customer.cash -= rate;
    agency.cash += (rate - tax17);
    console.log(`Transaction Was Successful`);
    return tax17;
  }

  //Update Tax Authorities
  updateTaxAuthorities(taxCollected, sumOfTransactions){
    this.taxesAuthority.totalTaxesPaid += taxCollected;
    this.taxesAuthority.sumOfAllTransactions += sumOfTransactions;
    this.taxesAuthority.numberOfTransactions++;
    console.log(`Taxes Updated`);
  }

  // Remove A Car From An Agency With Small Modification To Copy The Car
  removeCarFromAgency(agency, carDetails) {
    let carCopy = {};

    const [carBrand, index, ] = carDetails;
    agency.cars.forEach((brands) => {
      if (brands.brand === carBrand) {
        carCopy = brands.models.splice(index, 1);
      }
    });
    return carCopy;
  }

  //Add A Car To The Customer And Change ID Of Car
  addCarToCustomer(customer, newCar) {
    newCar[0].ownerId = customer.id;
    customer.cars.push(newCar[0]);
    console.log(`Car Has Been Added To The Customer`);
    return true;
  }


  // Sell A Car, FInd The Agency Using Car ID And Handling The Cash And The Transfer
  sellCar(carNumber, customerId) {

    const theAgency = this.searchAgencyWIthCarID(carNumber);    //Find The Agency 
    if (!theAgency) return false;

    const theCar = this.searchCarIndex(carNumber,theAgency);    // Restructure The Car
    if (!theCar) return false;

    const theCustomer = this.searchCustomer(customerId);        // Find The Customer
    if (!theCustomer) return false;

    const [, , carRate] = theCar                                // Use The Rate Of The Car

    const verifyCustomerCash = this.verifyCustomerCash(theCustomer,carRate);
    if (!verifyCustomerCash) {
      console.log(`The Customer Does Not Have Enough Cash`);
      return false;
    }
    const saleTax = this.updateCashTransfer(theCustomer, theAgency, carRate);  //Update The Cash

    this.updateTaxAuthorities(saleTax, carRate);                               //Update taxesAuthority
    
    const carCopy = this.removeCarFromAgency(theAgency, theCar);               //Remove The Car And Copy
    
    const addCar = this.addCarToCustomer(theCustomer,carCopy);                 //Add Car And Change ID
    if (addCar) return true;
  }

  // Calculates The Revenue Of All The Agencies Together
  getTotalMarketRevenue() {
    return this.agencies.reduce((total, agency) => total + (agency.cash + agency.credit),0);
  }
}















console.log(
  `-------------------------------------------------------------------`
);


// Car Agency Manager Tests
const carAgencyManager = new CarAgencyManager(agencies);






// Test searchAgency
console.log(
  "Search Agency by ID: ",
  carAgencyManager.searchAgency("Plyq5M5AZ")
);
console.log(
  "Search Agency by Name: ",
  carAgencyManager.searchAgency("Best Deal")
);
console.log(
  "Search Agency Non-existent: ",
  carAgencyManager.searchAgency("NonExistent")
);





console.log(
  `-------------------------------------------------------------------`
);




// Test getAllAgencies
console.log("All Agencies: ", carAgencyManager.getAllAgencies());





console.log(
  `-------------------------------------------------------------------`
);





// Test addCarToAgencyconsole.log

const newCar = {
  brand: "toyota",
  models: [
    {
      name: "Camry",
      year: 2021,
      price: 30000,
      carNumber: "TEST1",
      ownerId: "Plyq5M5AZ",
    },
  ],
};

console.log(
  "Add Car to Agency: ",
  carAgencyManager.addCarToAgency("Plyq5M5AZ", newCar)
);




console.log(
  `-------------------------------------------------------------------`
);




// Test removeCarFromAgency
console.log(
  "Remove Car from Agency: ",
  carAgencyManager.removeCarFromAgency("Plyq5M5AZ", "TEST1")
);
console.log(
  "Remove Non-existent Car: ",
  carAgencyManager.removeCarFromAgency("Plyq5M5AZ", "NonExistent")
);




console.log(
  `-------------------------------------------------------------------`
);




// Test changeAgencyCashOrCredit
console.log(
  "Change Agency Cash: ",
  carAgencyManager.changeAgencyCashOrCredit("Plyq5M5AZ", 2000000)
);
console.log(
  "Change Agency Cash (Invalid): ",
  carAgencyManager.changeAgencyCashOrCredit("Plyq5M5AZ", "invalid")
);




console.log(
  `-------------------------------------------------------------------`
);





// Test updateCarPrice
console.log(
  "Update Car Price: ",
  carAgencyManager.updateCarPrice("Plyq5M5AZ", "AZJZ4", 150000)
);
console.log(
  "Update Car Price Non-existent: ",
  carAgencyManager.updateCarPrice("Plyq5M5AZ", "NonExistent", 150000)
);





console.log(
  `-------------------------------------------------------------------`
);





// Test getTotalAgencyRevenue
console.log(
  "Total Agency Revenue: ",
  carAgencyManager.getTotalAgencyRevenue("Plyq5M5AZ")
);





console.log(
  `-------------------------------------------------------------------`
);





// Test transferCarBetweenAgencies
console.log(
  "Transfer Car Between Agencies: ",
  carAgencyManager.transferCarBetweenAgencies("Plyq5M5AZ", "26_IPfHU1", "AZJZ4")
);
console.log(
  "Transfer Car Between Agencies (Non-existent): ",
  carAgencyManager.transferCarBetweenAgencies(
    "NonExistent",
    "26_IPfHU1",
    "AZJZ4"
  )
);





console.log(
  `-------------------------------------------------------------------`
);





// Customer Manager Tests
const customerManager = new CustomerManager(customers);

// Test searchCustomer
console.log(
  "Search Customer by ID: ",
  customerManager.searchCustomer("BGzHhjnE8")
);
console.log(
  "Search Customer by Name: ",
  customerManager.searchCustomer("Lilah Goulding")
);
console.log(
  "Search Customer Non-existent: ",
  customerManager.searchCustomer("NonExistent")
);





console.log(
  `-------------------------------------------------------------------`
);





// Test getAllCustomers
console.log("All Customers: ", customerManager.getAllCustomers());





console.log(
  `-------------------------------------------------------------------`
);




// Test changeCustomerCash
console.log(
  "Change Customer Cash: ",
  customerManager.changeCustomerCash("BGzHhjnE8", 50000)
);
console.log(
  "Change Customer Cash Non-existent: ",
  customerManager.changeCustomerCash("NonExistent", 50000)
);




console.log(
  `-------------------------------------------------------------------`
);




// Test getCustomerTotalCarValue
console.log(
  "Customer Total Car Value: ",
  customerManager.getCustomerTotalCarValue("BGzHhjnE8")
);
console.log(
  "Customer Total Car Value Non-existent: ",
  customerManager.getCustomerTotalCarValue("NonExistent")
);





console.log(
  `-------------------------------------------------------------------`
);




// Car Manager Tests
const carManager = new CarManager(agencies);

// Test getAllCars
console.log("All Cars: ", carManager.getAllCars());




console.log(
  `-------------------------------------------------------------------`
);




// Test searchCars
console.log("Search Cars: ", carManager.searchCars(2020, 966500, "bmw"));
console.log("Search Cars (No Brand): ", carManager.searchCars(2020, 500000));




console.log(
  `-------------------------------------------------------------------`
);







// Test getMostExpensiveCar
console.log('Most Expensive Car: ', carManager.getMostExpensiveCar());






console.log(
  `-------------------------------------------------------------------`
);






// Test getCheapestCar
console.log('Cheapest Car: ', carManager.getCheapestCar());






console.log(
  `-------------------------------------------------------------------`
);






// Car Purchase Manager Tests
const carPurchaseManager = new CarPurchaseManager(agencies, customers);


// Test sellCar
console.log('Sell Car: ', carPurchaseManager.sellCar('AZJZ4', 'FQvNsEwLZ'));
// The Above Customer Does Not Have Enough Cash Since The Car Price Was Changed To 150,000 In Previous Exercise So I Chose A Different Customer To Check Instead 'BGzHhjnE8'.
console.log('Sell Car (Non-existent): ', carPurchaseManager.sellCar('NonExistent', 'BGzHhjnE8'));
console.log('Sell Car (Insufficient Funds): ', carPurchaseManager.sellCar('AZJZ4', 'Wm6BkA1F0'));





console.log(
  `-------------------------------------------------------------------`
);


// Test getTotalMarketRevenue
console.log('Total Market Revenue: ', carPurchaseManager.getTotalMarketRevenue());
